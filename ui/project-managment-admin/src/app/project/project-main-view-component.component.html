
<div class="wrapper">
  <div class="sidebar" data-color="blue">
    <app-sidebar></app-sidebar>
  </div>
  <div class="main-panel">
    <app-navbar></app-navbar>
    <div class="panel-header panel-header-sm">
    </div>
    <div class="main-content">
      <div class="row">
        <div class="col-md-12">

          <div>

            <div *ngIf="showPage" class="container">


              <div class="flex-item">


                <div class="pr-list-container">
                  <h4 align="center">Presentations</h4>
                  <hr>


                  <div *ngFor="let p of presentationList" class="pr-list">

                    <mat-accordion>
                      <mat-expansion-panel>
                        <mat-expansion-panel-header collapsedHeight="100px">
                              <mat-panel-title>
                                {{p.name}}
                              </mat-panel-title>
                              <mat-panel-description>
                                Created on {{p.created?.seconds * 1000|date:'MM-dd-yyyy'}} <br>Mark bias:{{p?.markBias}}
                                % <br>Scheduled on
                                {{p.scheduledTo?.seconds * 1000|date:'MM-dd-yyyy'}}
                              </mat-panel-description>
                            </mat-expansion-panel-header>
                        <mat-action-row>
                          <button mat-button (click)="saveUpdates(p.id)">Save Changes</button>
                          <button mat-button [routerLink]="['./presentation',p.id]">Open</button>
                        </mat-action-row>


                        <mat-form-field style="margin-right:10px ">
                          <input matInput placeholder="Mark bias percentage" [value]="p.markBias" [formControl]="mark"
                          >
                            </mat-form-field>

                            <mat-form-field>
                              <input matInput [min]="minDate" [matDatepicker]="picker" placeholder="Schedule to"
                                     [value]="scheduledOn">
                              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                              <mat-datepicker #picker></mat-datepicker>
                            </mat-form-field>

                        <button style="float: right" mat-icon-button [matMenuTriggerFor]="menu">
                              <mat-icon>more_vert</mat-icon>
                            </button>

                            <mat-menu #menu="matMenu">
                              <button mat-menu-item>
                                <mat-icon>pencil</mat-icon>
                                <span>Edit</span>
                              </button>
                              <button mat-menu-item (click)="deletePresentation(p.id)">
                                <mat-icon>delete</mat-icon>
                                <span>Delete</span>
                              </button>
                            </mat-menu>

                          </mat-expansion-panel>
                        </mat-accordion>

                      </div>


                </div>

              </div>

              <div class="flex-item">

                <div class="pr-list-container">
                  <h4 align="center">Manage students</h4>
                  <hr>

                  <div fxLayoutAlign.lt-sm="center" style="margin-bottom: 8px">
                    <button align="center" mat-button mat-stroked-button class="upload-button"
                            (click)="clickAddFiles(file)">
                      Upload csv file
                    </button>
                    <p>{{fileName}}</p>
                  </div>
                  <div fxLayoutAlign.lt-sm="center">
                  <button align="center" mat-button mat-stroked-button class="upload-button"
                          [routerLink]="['./students']">View Groups
                    Students
                  </button>
                  </div>
                </div>


              </div>

              <div class="flex-item">

                <div class="pr-list-container">
                  <h4 align="center">Evaluation results</h4>
                  <hr>

                  <button align="center" mat-button mat-stroked-button class="upload-button"
                          [routerLink]="['/marks',id_original]">View results for current evaluations
                  </button>
                </div>


              </div>
            </div>

          </div>
        </div>
      </div>
    </div>


    <button mat-fab class="fab" (click)="addPresentation()" matTooltip="create new prsentation">
      <mat-icon>add</mat-icon>
    </button>

    <input type="file" style="display: none" #file (change)="onFilesAdded()" accept=".csv,text/csv"/>
    <app-footer></app-footer>
  </div>
</div>


